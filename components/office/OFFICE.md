# Office module

Components related to office productivity and collaboration.

## Recommended setup/tldr

```sh
pulumi config set nextcloud:enabled true
pulumi up
```

## Nextcloud

|               |                                                                          |
| ------------- | ------------------------------------------------------------------------ |
| Homepage      | https://nextcloud.com/                                                   |
| Helm chart    | https://github.com/nextcloud/helm                                        |
| Helm values   | https://github.com/nextcloud/helm/blob/main/charts/nextcloud/values.yaml |
| Endpoints     | `https://nextcloud.<tsnet>.ts.net/`                                      |
| Documentation | https://docs.nextcloud.com/                                              |

Nextcloud is a self-hosted productivity platform that lets you store files, collaborate, and run office apps in your own private cloud.

It can also be used to store your contacts, bookmarks, calendar etc. and has a lot of additional modules which can be installed through the deployed website.

### Basic configuration

```sh
# Enable Nextcloud
pulumi config set nextcloud:enabled true
# Set hostname (optional, default: nextcloud)
pulumi config set nextcloud:hostname nextcloud
# Set storage size (default: 20Gi)
pulumi config set nextcloud:storageSize 50Gi
# Set storage size for PostgreSQL database (default: 5Gi)
pulumi config set nextcloud:storageSize 10Gi
# (Optional) Set admin password, auto-generated by default
pulumi config set nextcloud:adminPassword abcd1234 --secret
pulumi up
```

### Storage

Nextcloud uses a persistent volume for file storage. You can expand the volume as needed. To keep data but disable the app:

```sh
pulumi config set nextcloud:storageOnly true
pulumi up
```

### Access

After deployment, access Nextcloud at:

```sh
https://nextcloud.<tsnet>.ts.net/
```

Login with the admin user. The password can be retrieved with:

```sh
pulumi stack output --show-secrets --json | jq '.office.nextcloudUsers.admin' -r
```

---

For more advanced configuration, see the [Nextcloud Helm chart documentation](https://github.com/nextcloud/helm) and [Nextcloud admin docs](https://docs.nextcloud.com/server/latest/).
